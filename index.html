<!doctype html>
<head><meta charset="utf-8">
<title>Named capture groups in regular expressions</title><script type="application/json" id="menu-search-biblio">[{"type":"production","id":"prod-Atom","name":"Atom","referencingIds":[],"namespace":"https://github.com/tc39/proposal-regexp-named-groups","location":"","key":"Atom"},{"type":"production","id":"prod-AtomEscape","name":"AtomEscape","referencingIds":["_ref_18"],"namespace":"https://github.com/tc39/proposal-regexp-named-groups","location":"","key":"AtomEscape"},{"type":"production","id":"prod-GroupSpecifier","name":"GroupSpecifier","referencingIds":["_ref_19","_ref_22","_ref_23","_ref_25","_ref_27","_ref_30","_ref_32","_ref_33","_ref_34","_ref_35"],"namespace":"https://github.com/tc39/proposal-regexp-named-groups","location":"","key":"GroupSpecifier"},{"type":"production","id":"prod-GroupName","name":"GroupName","referencingIds":["_ref_20","_ref_21","_ref_26","_ref_28","_ref_29","_ref_31","_ref_36"],"namespace":"https://github.com/tc39/proposal-regexp-named-groups","location":"","key":"GroupName"},{"type":"clause","id":"sec-patterns","aoid":null,"title":"Patterns (#sec-patterns)","titleHTML":"Patterns (<a href=\"https://tc39.github.io/ecma262/#sec-patterns\">#sec-patterns</a>)","number":"1","namespace":"https://github.com/tc39/proposal-regexp-named-groups","location":"","referencingIds":[],"key":"Patterns (#sec-patterns)"},{"type":"production","id":"prod-Pattern","name":"Pattern","referencingIds":["_ref_24"],"namespace":"https://github.com/tc39/proposal-regexp-named-groups","location":"","key":"Pattern"},{"type":"clause","id":"sec-patterns-static-semantics-early-errors","aoid":null,"title":"Static Semantics: Early Errors (#sec-patterns-static-semantics-early-errors)","titleHTML":"Static Semantics: Early Errors (<a href=\"https://tc39.github.io/ecma262/#sec-patterns-static-semantics-early-errors\">#sec-patterns-static-semantics-early-errors</a>)","number":"2","namespace":"https://github.com/tc39/proposal-regexp-named-groups","location":"","referencingIds":[],"key":"Static Semantics: Early Errors (#sec-patterns-static-semantics-early-errors)"},{"type":"op","aoid":"BackreferenceMatcher","refId":"sec-backreference-matcher","location":"","referencingIds":[],"key":"BackreferenceMatcher"},{"type":"clause","id":"sec-backreference-matcher","aoid":"BackreferenceMatcher","title":"Runtime Semantics: BackreferenceMatcher Abstract Operation","titleHTML":"Runtime Semantics: BackreferenceMatcher Abstract Operation","number":"3","namespace":"https://github.com/tc39/proposal-regexp-named-groups","location":"","referencingIds":["_ref_2"],"key":"Runtime Semantics: BackreferenceMatcher Abstract Operation"},{"type":"clause","id":"sec-atomescape","aoid":null,"title":"AtomEscape","titleHTML":"AtomEscape","number":"4","namespace":"https://github.com/tc39/proposal-regexp-named-groups","location":"","referencingIds":[],"key":"AtomEscape"},{"type":"op","aoid":"RegExpBuiltinExec","refId":"sec-regexpbuiltinexec","location":"","referencingIds":[],"key":"RegExpBuiltinExec"},{"type":"clause","id":"sec-regexpbuiltinexec","aoid":"RegExpBuiltinExec","title":"Runtime Semantics: RegExpBuiltinExec ( R, S )","titleHTML":"Runtime Semantics: RegExpBuiltinExec ( <var>R</var>, <var>S</var> )","number":"5","namespace":"https://github.com/tc39/proposal-regexp-named-groups","location":"","referencingIds":[],"key":"Runtime Semantics: RegExpBuiltinExec ( R, S )"}]</script></head><body><div id="menu-toggle">☰</div><div id="menu-spacer"></div><div id="menu"><div id="menu-search"><input type="text" id="menu-search-box" placeholder="Search..."><div id="menu-search-results" class="inactive"></div></div><div id="menu-pins"><div class="menu-pane-header">Pins</div><ul id="menu-pins-list"></ul></div><div class="menu-pane-header">Table of Contents</div><div id="menu-toc"><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-patterns" title="Patterns (#sec-patterns)"><span class="secnum">1</span> Patterns (</a><a href="https://tc39.github.io/ecma262/#sec-patterns">#sec-patterns</a>)</li><li><span class="item-toggle-none"></span><a href="#sec-patterns-static-semantics-early-errors" title="Static Semantics: Early Errors (#sec-patterns-static-semantics-early-errors)"><span class="secnum">2</span> SS: Early Errors (</a><a href="https://tc39.github.io/ecma262/#sec-patterns-static-semantics-early-errors">#sec-patterns-static-semantics-early-errors</a>)</li><li><span class="item-toggle-none"></span><a href="#sec-backreference-matcher" title="Runtime Semantics: BackreferenceMatcher Abstract Operation"><span class="secnum">3</span> RS: BackreferenceMatcher Abstract Operation</a></li><li><span class="item-toggle-none"></span><a href="#sec-atomescape" title="AtomEscape"><span class="secnum">4</span> AtomEscape</a></li><li><span class="item-toggle-none"></span><a href="#sec-regexpbuiltinexec" title="Runtime Semantics: RegExpBuiltinExec ( R, S )"><span class="secnum">5</span> RS: RegExpBuiltinExec ( <var>R</var>, <var>S</var> )</a></li></ol></div></div><div id="spec-container"><h1 class="version first">Stage 2 Draft / January 9, 2017</h1><h1 class="title">Named capture groups in regular expressions</h1>
<script src="ecmarkup.js" defer=""></script>
<link rel="stylesheet" href="ecmarkup.css">

<emu-clause id="sec-patterns">
  <h1><span class="secnum">1</span>Patterns (<a href="https://tc39.github.io/ecma262/#sec-patterns">#sec-patterns</a>)</h1>
  <h2>Syntax</h2>
  <emu-grammar><emu-production name="Atom" params="U" type="lexical" id="prod-Atom">
    <emu-nt params="U"><a href="#prod-Atom">Atom</a><emu-mods><emu-params>[U]</emu-params></emu-mods></emu-nt><emu-geq>::</emu-geq><emu-rhs a="beff52c4"><emu-nt><a href="https://tc39.github.io/ecma262/#prod-PatternCharacter">PatternCharacter</a></emu-nt></emu-rhs>
    <emu-rhs a="9658e473"><emu-t>.</emu-t></emu-rhs>
    <emu-rhs a="360729b9"><emu-t>\</emu-t><emu-nt params="?U" id="_ref_18"><a href="#prod-AtomEscape">AtomEscape</a><emu-mods><emu-params>[?U]</emu-params></emu-mods></emu-nt></emu-rhs>
    <emu-rhs a="72a5dc04"><emu-nt params="?U"><a href="https://tc39.github.io/ecma262/#prod-CharacterClass">CharacterClass</a><emu-mods><emu-params>[?U]</emu-params></emu-mods></emu-nt></emu-rhs>
    <emu-rhs a="eb6786f5"><emu-t>(</emu-t><ins>
        <emu-nt id="_ref_19"><a href="#prod-GroupSpecifier">GroupSpecifier</a></emu-nt></ins><emu-nt params="?U"><a href="https://tc39.github.io/ecma262/#prod-Disjunction">Disjunction</a><emu-mods><emu-params>[?U]</emu-params></emu-mods></emu-nt><emu-t>)</emu-t></emu-rhs>
    <emu-rhs a="a3359f62"><emu-t>(</emu-t><emu-t>?</emu-t><emu-t>:</emu-t><emu-nt params="?U"><a href="https://tc39.github.io/ecma262/#prod-Disjunction">Disjunction</a><emu-mods><emu-params>[?U]</emu-params></emu-mods></emu-nt><emu-t>)</emu-t></emu-rhs>
</emu-production>
<emu-production name="AtomEscape" params="U" type="lexical" id="prod-AtomEscape">
    <emu-nt params="U"><a href="#prod-AtomEscape">AtomEscape</a><emu-mods><emu-params>[U]</emu-params></emu-mods></emu-nt><emu-geq>::</emu-geq><emu-rhs a="7ebff96c"><emu-nt><a href="https://tc39.github.io/ecma262/#prod-DecimalEscape">DecimalEscape</a></emu-nt></emu-rhs>
    <emu-rhs a="6f05bee4"><emu-nt><a href="https://tc39.github.io/ecma262/#prod-CharacterClassEscape">CharacterClassEscape</a></emu-nt></emu-rhs>
    <emu-rhs a="4b80816a"><emu-nt params="?U"><a href="https://tc39.github.io/ecma262/#prod-CharacterEscape">CharacterEscape</a><emu-mods><emu-params>[?U]</emu-params></emu-mods></emu-nt></emu-rhs><ins>
    <emu-rhs a="c1c219d2" constraints="+U"><emu-constraints>[+U]</emu-constraints><emu-t>k</emu-t><emu-nt id="_ref_20"><a href="#prod-GroupName">GroupName</a></emu-nt></emu-rhs>
</ins></emu-production>
<ins><emu-production name="GroupSpecifier" type="lexical" id="prod-GroupSpecifier">
    <emu-nt><a href="#prod-GroupSpecifier">GroupSpecifier</a></emu-nt><emu-geq>::</emu-geq><emu-rhs a="37b9c04c"><emu-gann>[empty]</emu-gann></emu-rhs>
    <emu-rhs a="d30986c6" constraints="+U"><emu-constraints>[+U]</emu-constraints><emu-t>?</emu-t><emu-nt id="_ref_21"><a href="#prod-GroupName">GroupName</a></emu-nt></emu-rhs>
</emu-production>
<emu-production name="GroupName" type="lexical" id="prod-GroupName">
    <emu-nt><a href="#prod-GroupName">GroupName</a></emu-nt><emu-geq>::</emu-geq><emu-rhs a="47bcbefc"><emu-t>&lt;</emu-t><emu-nt><a href="https://tc39.github.io/ecma262/#prod-IdentifierName">IdentifierName</a></emu-nt><emu-t>&gt;</emu-t></emu-rhs>
</emu-production></ins></emu-grammar>
</emu-clause>


<emu-clause id="sec-patterns-static-semantics-early-errors">
  <h1><span class="secnum">2</span>Static Semantics: Early Errors (<a href="https://tc39.github.io/ecma262/#sec-patterns-static-semantics-early-errors">#sec-patterns-static-semantics-early-errors</a>)</h1>
  <ins class="block">
    <emu-grammar><emu-production name="Atom" collapsed="">
    <emu-nt><a href="#prod-Atom">Atom</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="eb6786f5"><emu-t>(</emu-t><emu-nt id="_ref_22"><a href="#prod-GroupSpecifier">GroupSpecifier</a></emu-nt><emu-nt params="?U"><a href="https://tc39.github.io/ecma262/#prod-Disjunction">Disjunction</a><emu-mods><emu-params>[?U]</emu-params></emu-mods></emu-nt><emu-t>)</emu-t></emu-rhs>
</emu-production></emu-grammar>
    <ul>
      <li>
        It is a Syntax Error if <emu-nt id="_ref_23"><a href="#prod-GroupSpecifier">GroupSpecifier</a></emu-nt> contains an <emu-nt><a href="https://tc39.github.io/ecma262/#prod-IdentifierName">IdentifierName</a></emu-nt> whose StringValue is <code>"length"</code>, <code>"index"</code> or <code>"input"</code>.
      
      </li>
    </ul>

    <emu-grammar><emu-production name="Pattern" collapsed="" id="prod-Pattern">
    <emu-nt><a href="#prod-Pattern">Pattern</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="79a5bbd0"><emu-nt><a href="https://tc39.github.io/ecma262/#prod-Disjunction">Disjunction</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
    <ul>
      <li>
        It is a Syntax Error if <emu-nt id="_ref_24"><a href="#prod-Pattern">Pattern</a></emu-nt> contains multiple <emu-nt id="_ref_25"><a href="#prod-GroupSpecifier">GroupSpecifier</a></emu-nt>s whose enclosed <emu-nt><a href="https://tc39.github.io/ecma262/#prod-IdentifierName">IdentifierName</a></emu-nt>s have the same StringValue.
      
      </li>
    </ul>

    <emu-grammar><emu-production name="AtomEscape" params="U" collapsed="">
    <emu-nt params="U"><a href="#prod-AtomEscape">AtomEscape</a><emu-mods><emu-params>[U]</emu-params></emu-mods></emu-nt><emu-geq>:</emu-geq><emu-rhs a="c1c219d2" constraints="+U"><emu-constraints>[+U]</emu-constraints><emu-t>k</emu-t><emu-nt id="_ref_26"><a href="#prod-GroupName">GroupName</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
    <ul>
      <li>
        It is a Syntax Error if the enclosing RegExp does not contain a <emu-nt id="_ref_27"><a href="#prod-GroupSpecifier">GroupSpecifier</a></emu-nt> with an enclosed <emu-nt>IdentiferName</emu-nt> whose StringValue equals the StringValue of the <emu-nt>IdentierName</emu-nt> of this production's <emu-nt id="_ref_28"><a href="#prod-GroupName">GroupName</a></emu-nt>.
      
      </li>
    </ul>
  </ins>
</emu-clause>

<emu-clause id="sec-backreference-matcher" aoid="BackreferenceMatcher">
  <h1><span class="secnum">3</span>Runtime Semantics: BackreferenceMatcher Abstract Operation</h1>
  <p>The abstract operation BackreferenceMatcher takes one argument, an integer <var>n</var>, and performs the following steps:</p>
  <emu-alg><ol><li>Return an internal Matcher closure that takes two arguments, a State <var>x</var> and a Continuation <var>c</var>, and performs the following steps:<ol><li>Let <var>cap</var> be <var>x</var>'s <var>captures</var> <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Let <var>s</var> be <var>cap</var>[<var>n</var>].</li><li>If <var>s</var> is <emu-val>undefined</emu-val>, return <var>c</var>(<var>x</var>).</li><li>Let <var>e</var> be <var>x</var>'s <var>endIndex</var>.</li><li>Let <var>len</var> be <var>s</var>'s length.</li><li>Let <var>f</var> be <var>e</var>+<var>len</var>.</li><li>If <var>f</var>&gt;<var>InputLength</var>, return <emu-const>failure</emu-const>.</li><li>If there exists an integer <var>i</var> between 0 (inclusive) and <var>len</var> (exclusive) such that <emu-xref aoid="Canonicalize" id="_ref_0"><a href="https://tc39.github.io/ecma262/#sec-runtime-semantics-canonicalize-ch">Canonicalize</a></emu-xref>(<var>s</var>[<var>i</var>]) is not the same character value as <emu-xref aoid="Canonicalize" id="_ref_1"><a href="https://tc39.github.io/ecma262/#sec-runtime-semantics-canonicalize-ch">Canonicalize</a></emu-xref>(<var>Input</var>[<var>e</var>+<var>i</var>]), return <emu-const>failure</emu-const>.</li><li>Let <var>y</var> be the State (<var>f</var>, <var>cap</var>).</li><li>Call <var>c</var>(<var>y</var>) and return its result.
  </li></ol></li></ol></emu-alg>
  <emu-note><span class="note">Note</span><div class="note-contents">This abstract operation is extracted from the  <a href="https://tc39.github.io/ecma262/#sec-atomescape">runtime semantics</a> of  <emu-grammar><emu-production name="AtomEscape" type="lexical" collapsed="">
    <emu-nt><a href="#prod-AtomEscape">AtomEscape</a></emu-nt><emu-geq>::</emu-geq><emu-rhs a="7ebff96c"><emu-nt><a href="https://tc39.github.io/ecma262/#prod-DecimalEscape">DecimalEscape</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>, and when this text is integrated into the main specification, it would be called from there as well.</div></emu-note>
</emu-clause>

<emu-clause id="sec-atomescape">
  <h1><span class="secnum">4</span>AtomEscape</h1>
  <ins class="block">
  <p>The production  <emu-grammar><emu-production name="AtomEscape" type="lexical" collapsed="" class=" inline">
    <emu-nt><a href="#prod-AtomEscape">AtomEscape</a></emu-nt><emu-geq>::</emu-geq><emu-rhs a="743fd78c"><emu-t>k</emu-t><emu-nt id="_ref_29"><a href="#prod-GroupName">GroupName</a></emu-nt></emu-rhs>
</emu-production></emu-grammar> evaluates as follows:</p>
  <emu-alg><ol><li>Search the enclosing RegExp for an instance of a <emu-nt id="_ref_30"><a href="#prod-GroupSpecifier">GroupSpecifier</a></emu-nt> for an <emu-nt><a href="https://tc39.github.io/ecma262/#prod-IdentifierName">IdentifierName</a></emu-nt> which has a StringValue equal to the StringValue of the <emu-nt><a href="https://tc39.github.io/ecma262/#prod-IdentifierName">IdentifierName</a></emu-nt> contained in <emu-nt id="_ref_31"><a href="#prod-GroupName">GroupName</a></emu-nt>.</li><li>Assert: A unique such <emu-nt id="_ref_32"><a href="#prod-GroupSpecifier">GroupSpecifier</a></emu-nt> is found.</li><li>Let <var>parenIndex</var> be the number of left capturing parentheses in the entire regular expression that occur to the left of the located <emu-nt id="_ref_33"><a href="#prod-GroupSpecifier">GroupSpecifier</a></emu-nt>. This is the total number of times the <emu-grammar><emu-production name="Atom" type="lexical" collapsed="" class=" inline">
    <emu-nt><a href="#prod-Atom">Atom</a></emu-nt><emu-geq>::</emu-geq><emu-rhs a="59aa089b"><emu-t>(</emu-t><emu-nt id="_ref_34"><a href="#prod-GroupSpecifier">GroupSpecifier</a></emu-nt><emu-nt><a href="https://tc39.github.io/ecma262/#prod-Disjunction">Disjunction</a></emu-nt><emu-t>)</emu-t></emu-rhs>
</emu-production></emu-grammar> production is expanded prior to that production's <emu-nt><a href="https://tc39.github.io/ecma262/#prod-Term">Term</a></emu-nt> plus the total number of <emu-grammar><emu-production name="Atom" type="lexical" collapsed="" class=" inline">
    <emu-nt><a href="#prod-Atom">Atom</a></emu-nt><emu-geq>::</emu-geq><emu-rhs a="59aa089b"><emu-t>(</emu-t><emu-nt id="_ref_35"><a href="#prod-GroupSpecifier">GroupSpecifier</a></emu-nt><emu-nt><a href="https://tc39.github.io/ecma262/#prod-Disjunction">Disjunction</a></emu-nt><emu-t>)</emu-t></emu-rhs>
</emu-production></emu-grammar> productions enclosing this <emu-nt><a href="https://tc39.github.io/ecma262/#prod-Term">Term</a></emu-nt>.</li><li>Call <emu-xref aoid="BackreferenceMatcher" id="_ref_2"><a href="#sec-backreference-matcher">BackreferenceMatcher</a></emu-xref>(<var>parenIndex</var>) and return its Matcher result.
    </li></ol></emu-alg>
  </ins>
</emu-clause>


<!-- es6num="21.2.5.2.2" -->
<emu-clause id="sec-regexpbuiltinexec" aoid="RegExpBuiltinExec">
  <h1><span class="secnum">5</span>Runtime Semantics: RegExpBuiltinExec ( <var>R</var>, <var>S</var> )</h1>
  <p>The abstract operation RegExpBuiltinExec with arguments <var>R</var> and <var>S</var> performs the following steps:</p>
  <emu-alg><ol><li>Assert: <var>R</var> is an initialized RegExp instance.</li><li>Assert: <emu-xref aoid="Type" id="_ref_3"><a href="https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>S</var>) is String.</li><li>Let <var>length</var> be the number of code units in <var>S</var>.</li><li>Let <var>flags</var> be <var>R</var>.[[OriginalFlags]].</li><li>If <var>flags</var> contains <code>"g"</code>, let <var>global</var> be <emu-val>true</emu-val>, else let <var>global</var> be <emu-val>false</emu-val>.</li><li>If <var>flags</var> contains <code>"y"</code>, let <var>sticky</var> be <emu-val>true</emu-val>, else let <var>sticky</var> be <emu-val>false</emu-val>.</li><li>If <var>global</var> is <emu-val>false</emu-val> and <var>sticky</var> is <emu-val>false</emu-val>, let <var>lastIndex</var> be 0.</li><li>Else, let <var>lastIndex</var> be ?&nbsp;<emu-xref aoid="ToLength" id="_ref_4"><a href="https://tc39.github.io/ecma262/#sec-tolength">ToLength</a></emu-xref>(? <emu-xref aoid="Get" id="_ref_5"><a href="https://tc39.github.io/ecma262/#sec-get-o-p">Get</a></emu-xref>(<var>R</var>, <code>"lastIndex"</code>)).</li><li>Let <var>matcher</var> be <var>R</var>.[[RegExpMatcher]].</li><li>If <var>flags</var> contains <code>"u"</code>, let <var>fullUnicode</var> be <emu-val>true</emu-val>, else let <var>fullUnicode</var> be <emu-val>false</emu-val>.</li><li>Let <var>matchSucceeded</var> be <emu-val>false</emu-val>.</li><li>Repeat, while <var>matchSucceeded</var> is <emu-val>false</emu-val><ol><li>If <var>lastIndex</var> &gt; <var>length</var>, then<ol><li>If <var>global</var> is <emu-val>true</emu-val> or <var>sticky</var> is <emu-val>true</emu-val>, then<ol><li>Perform ?&nbsp;<emu-xref aoid="Set" id="_ref_6"><a href="https://tc39.github.io/ecma262/#sec-set-o-p-v-throw">Set</a></emu-xref>(<var>R</var>, <code>"lastIndex"</code>, 0, <emu-val>true</emu-val>).</li></ol></li><li>Return <emu-val>null</emu-val>.</li></ol></li><li>Let <var>r</var> be <var>matcher</var>(<var>S</var>, <var>lastIndex</var>).</li><li>If <var>r</var> is <emu-const>failure</emu-const>, then<ol><li>If <var>sticky</var> is <emu-val>true</emu-val>, then<ol><li>Perform ?&nbsp;<emu-xref aoid="Set" id="_ref_7"><a href="https://tc39.github.io/ecma262/#sec-set-o-p-v-throw">Set</a></emu-xref>(<var>R</var>, <code>"lastIndex"</code>, 0, <emu-val>true</emu-val>).</li><li>Return <emu-val>null</emu-val>.</li></ol></li><li>Let <var>lastIndex</var> be <emu-xref aoid="AdvanceStringIndex" id="_ref_8"><a href="https://tc39.github.io/ecma262/#sec-advancestringindex">AdvanceStringIndex</a></emu-xref>(<var>S</var>, <var>lastIndex</var>, <var>fullUnicode</var>).</li></ol></li><li>Else,<ol><li>Assert: <var>r</var> is a State.</li><li>Set <var>matchSucceeded</var> to <emu-val>true</emu-val>.</li></ol></li></ol></li><li>Let <var>e</var> be <var>r</var>'s <var>endIndex</var> value.</li><li>If <var>fullUnicode</var> is <emu-val>true</emu-val>, then<ol><li><var>e</var> is an index into the <var>Input</var> character list, derived from <var>S</var>, matched by <var>matcher</var>. Let <var>eUTF</var> be the smallest index into <var>S</var> that corresponds to the character at element <var>e</var> of <var>Input</var>. If <var>e</var> is greater than or equal to the length of <var>Input</var>, then <var>eUTF</var> is the number of code units in <var>S</var>.</li><li>Let <var>e</var> be <var>eUTF</var>.</li></ol></li><li>If <var>global</var> is <emu-val>true</emu-val> or <var>sticky</var> is <emu-val>true</emu-val>, then<ol><li>Perform ?&nbsp;<emu-xref aoid="Set" id="_ref_9"><a href="https://tc39.github.io/ecma262/#sec-set-o-p-v-throw">Set</a></emu-xref>(<var>R</var>, <code>"lastIndex"</code>, <var>e</var>, <emu-val>true</emu-val>).</li></ol></li><li>Let <var>n</var> be the length of <var>r</var>'s <var>captures</var> <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>. (This is the same value as <emu-xref href="#sec-notation"><a href="https://tc39.github.io/ecma262/#sec-notation">21.2.2.1</a></emu-xref>'s <var>NcapturingParens</var>.)</li><li>Let <var>A</var> be <emu-xref aoid="ArrayCreate" id="_ref_10"><a href="https://tc39.github.io/ecma262/#sec-arraycreate">ArrayCreate</a></emu-xref>(<var>n</var> + 1).</li><li>Assert: The value of <var>A</var>'s <code>"length"</code> property is <var>n</var> + 1.</li><li>Let <var>matchIndex</var> be <var>lastIndex</var>.</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataProperty" id="_ref_11"><a href="https://tc39.github.io/ecma262/#sec-createdataproperty">CreateDataProperty</a></emu-xref>(<var>A</var>, <code>"index"</code>, <var>matchIndex</var>).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataProperty" id="_ref_12"><a href="https://tc39.github.io/ecma262/#sec-createdataproperty">CreateDataProperty</a></emu-xref>(<var>A</var>, <code>"input"</code>, <var>S</var>).</li><li>Let <var>matchedSubstr</var> be the matched substring (i.e. the portion of <var>S</var> between offset <var>lastIndex</var> inclusive and offset <var>e</var> exclusive).</li><li>Perform !&nbsp;<emu-xref aoid="CreateDataProperty" id="_ref_13"><a href="https://tc39.github.io/ecma262/#sec-createdataproperty">CreateDataProperty</a></emu-xref>(<var>A</var>, <code>"0"</code>, <var>matchedSubstr</var>).</li><li>For each integer <var>i</var> such that <var>i</var> &gt; 0 and <var>i</var> ≤ <var>n</var><ol><li>Let <var>captureI</var> be <var>i</var><sup>th</sup> element of <var>r</var>'s <var>captures</var> <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>If <var>captureI</var> is <emu-val>undefined</emu-val>, let <var>capturedValue</var> be <emu-val>undefined</emu-val>.</li><li>Else if <var>fullUnicode</var> is <emu-val>true</emu-val>, then<ol><li>Assert: <var>captureI</var> is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of code points.</li><li>Let <var>capturedValue</var> be a string whose code units are the <emu-xref aoid="UTF16Encoding" id="_ref_14"><a href="https://tc39.github.io/ecma262/#sec-utf16encoding">UTF16Encoding</a></emu-xref> of the code points of <var>captureI</var>.</li></ol></li><li>Else <var>fullUnicode</var> is <emu-val>false</emu-val>,<ol><li>Assert: <var>captureI</var> is a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262/#sec-list-and-record-specification-type">List</a></emu-xref> of code units.</li><li>Let <var>capturedValue</var> be a string consisting of the code units of <var>captureI</var>.</li></ol></li><li>Perform !&nbsp;<emu-xref aoid="CreateDataProperty" id="_ref_15"><a href="https://tc39.github.io/ecma262/#sec-createdataproperty">CreateDataProperty</a></emu-xref>(<var>A</var>, !&nbsp;<emu-xref aoid="ToString" id="_ref_16"><a href="https://tc39.github.io/ecma262/#sec-tostring">ToString</a></emu-xref>(<var>i</var>), <var>capturedValue</var>).</li><li><ins>If the <var>i</var>th capture of <var>R</var> was defined with a <emu-nt id="_ref_36"><a href="#prod-GroupName">GroupName</a></emu-nt>,</ins><ol><li><ins>Let <var>s</var> be the StringValue of the corresponding <emu-nt><a href="https://tc39.github.io/ecma262/#prod-IdentifierName">IdentifierName</a></emu-nt>.</ins></li><li><ins>Perform !&nbsp;<emu-xref aoid="CreateDataProperty" id="_ref_17"><a href="https://tc39.github.io/ecma262/#sec-createdataproperty">CreateDataProperty</a></emu-xref>(<var>A</var>, <var>s</var>, <var>capturedValue</var>).</ins></li></ol></li></ol></li><li>Return <var>A</var>.
  </li></ol></emu-alg>
</emu-clause>
</div></body>